<h2>All sessions</h2>
<div class="container">
<%if @sessions.nil? == false %>
   <% @sessions.each do |session| %>
   <div class="row row-bordered">
      <div class="col-xs-3 text-left">
         <label>For Datasource: </label> 
         <% if @datasets.map { |ds| ds.dataset_name }.include?(session.datasource_name) %>
            <a href="/dataset/detail/<%=session.datasource_name%>">
         <%else%>
            <a href="/views/detail/<%=session.datasource_name%>">
         <%end%>
         <%=session.datasource_name%></a>
      </div>
      <div class="col-xs-4">
         <span>
         <label>Run On: </label> <%= DateTime.parse(session.statusHistory.select {|v| v.has_value? "requested"}[0]["date"]).strftime('%A, %B %d %Y %r') %>
         </span>
      </div>
      <span><a href="/sessions/<%=URI::encode(session.sessionId)%>">See Status</a></span> |
      <%if session.statusHistory.select {|v| v.has_value? "completed"}[0].nil? == false %> 
      <span><a href="/results/<%=URI::encode(session.sessionId)%>">See Results</a></span> | 
      <span><a href="/results/file/<%=URI::encode(session.sessionId)%>" Download>Download Results</a></span> | 
      <%end%>
      <span><a href="/sessions/delete/<%=URI::encode(session.sessionId)%>">Delete Session</a></span>
   </div>
   <% end %>
   <%else%>
    <div class="alert alert-warning">
        No sesssions could be located.
    </div>
   <%end%>
</div>